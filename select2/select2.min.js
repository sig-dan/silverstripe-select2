/*
Copyright 2012 Igor Vaynberg

Version: 3.2-debounce Timestamp: Wed 01 May 2019 10:27:12 AM NZST

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this work except in
compliance with the License. You may obtain a copy of the License in the LICENSE file, or at:

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is
distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and limitations under the License.*/

(function(e){"undefined"==typeof e.fn.each2&&e.fn.extend({each2:function(g){for(var m=e([0]),p=-1,u=this.length;++p<u&&(m.context=m[0]=this[p])&&!1!==g.call(m[0],p,m););return this}})})(jQuery);
(function(e,g){function m(a,b){var c=0,d=b.length;if("undefined"===typeof a)return-1;if(a.constructor===String)for(;c<d;c+=1){if(0===a.localeCompare(b[c]))return c}else for(;c<d;c+=1){var h=b[c];if(h.constructor===String){if(0===h.localeCompare(a))return c}else if(h===a)return c}return-1}function p(a,b){return a===b?!0:a===g||b===g||null===a||null===b?!1:a.constructor===String?0===a.localeCompare(b):b.constructor===String?0===b.localeCompare(a):!1}function u(a,b){var c;if(null===a||1>a.length)return[];
var d=a.split(b);var h=0;for(c=d.length;h<c;h+=1)d[h]=e.trim(d[h]);return d}function K(a){a.bind("keydown",function(){e.data(a,"keyup-change-value")===g&&e.data(a,"keyup-change-value",a.val())});a.bind("keyup",function(){var b=e.data(a,"keyup-change-value");b!==g&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),a.trigger("keyup-change"))})}function L(a){a.bind("mousemove",function(a){var b=e.data(document,"select2-lastpos");b!==g&&b.x===a.pageX&&b.y===a.pageY||e(a.target).trigger("mousemove-filtered",
a)})}function A(a,b,c){c=c||g;var d;return function(){var h=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,h)},a)}}function M(a){var b=!1,c;return function(){!1===b&&(c=a(),b=!0);return c}}function N(a,b){var c=A(a,function(a){b.trigger("scroll-debounced",a)});b.bind("scroll",function(a){0<=m(a.target,b.get())&&c(a)})}function k(a){a.preventDefault();a.stopPropagation()}function B(a,b,c){var d=a.toUpperCase().indexOf(b.toUpperCase());b=b.length;0>d?c.push(a):(c.push(a.substring(0,
d)),c.push("<span class='select2-match'>"),c.push(a.substring(d,d+b)),c.push("</span>"),c.push(a.substring(d+b,a.length)))}function C(a){var b,c=0,d=null,h=a.quietMillis||100;return function(l){window.clearTimeout(b);b=window.setTimeout(function(){var b=c+=1,h=a.data,f=a.transport||e.ajax,g=a.traditional||!1,q=a.type||"GET";h=h.call(this,l.term,l.page,l.context);null!==d&&d.abort();d=f.call(null,{url:a.url,dataType:a.dataType,data:h,type:q,traditional:g,success:function(d){b<c||(d=a.results(d,l.page),
l.callback(d))}})},h)}}function F(a){var b=a,c=function(a){return""+a.text};if(!e.isArray(b)){c=b.text;if(!e.isFunction(c)){var d=b.text;c=function(a){return a[d]}}b=b.results}return function(a){var d=a.term,h={results:[]};if(""===d)a.callback({results:b});else{var f=function(b,h){var l;b=b[0];if(b.children){var g={};for(l in b)b.hasOwnProperty(l)&&(g[l]=b[l]);g.children=[];e(b.children).each2(function(a,b){f(b,g.children)});g.children.length&&h.push(g)}else a.matcher(d,c(b))&&h.push(b)};e(b).each2(function(a,
b){f(b,h.results)});a.callback(h)}}}function G(a){return e.isFunction(a)?a:function(b){var c=b.term,d={results:[]};e(a).each(function(){var a=this.text!==g,e=a?this.text:this;(""===c||b.matcher(c,e))&&d.results.push(a?this:{id:this,text:this})});b.callback(d)}}function v(a,b){if(e.isFunction(a))return!0;if(!a)return!1;throw Error("formatterName must be a function or a falsy value");}function w(a){return e.isFunction(a)?a():a}function H(a){var b=0;e.each(a,function(a,d){d.children?b+=H(d.children):
b++});return b}function x(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c}var y=(new Date).getTime();if(window.Select2===g){y=(new Date).getTime();var t;var f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},
isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};var O=function(){var a=1;return function(){return a++}}();e(document).delegate("body","mousemove",function(a){e.data(document,"select2-lastpos",{x:a.pageX,y:a.pageY})});e(document).ready(function(){e(document).delegate("body","mousedown touchend",function(a){var b=e(a.target).closest("div.select2-container").get(0);b?e(document).find("div.select2-container-active").each(function(){this!==
b&&e(this).data("select2").blur()}):(b=e(a.target).closest("div.select2-drop").get(0),e(document).find("div.select2-drop-active").each(function(){this!==b&&e(this).data("select2").blur()}));b=e(a.target);var c=b.attr("for");"LABEL"===a.target.tagName&&c&&0<c.length&&(b=e("#"+c),b=b.data("select2"),b!==g&&(b.focus(),a.preventDefault()))})});var z=x(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;this.opts=a=this.prepareOpts(a);this.id=a.id;a.element.data("select2")!==
g&&null!==a.element.data("select2")&&this.destroy();this.enabled=!0;this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+O());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*~':"!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.body=M(function(){return a.element.closest("body")});a.element.attr("class")!==g&&this.container.addClass(a.element.attr("class").replace(/validate\[[\S ]+] ?/,""));this.container.css(w(a.containerCss));
this.container.addClass(w(a.containerCssClass));this.opts.element.data("select2",this).hide().before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(w(a.dropdownCssClass));this.dropdown.data("select2",this);this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");c.attr("tabIndex",this.opts.element.attr("tabIndex"));this.resultsPage=0;this.context=null;this.initContainer();
this.initContainerWidth();L(this.results);this.dropdown.delegate(".select2-results","mousemove-filtered",this.bind(this.highlightUnderEvent));N(80,this.results);this.dropdown.delegate(".select2-results","scroll-debounced",this.bind(this.loadMoreIfNeeded));e.fn.mousewheel&&b.mousewheel(function(a,c,e,g){c=b.scrollTop();0<g&&0>=c-g?(b.scrollTop(0),k(a)):0>g&&b.get(0).scrollHeight-b.scrollTop()+g<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),k(a))});K(c);c.bind("keyup-change",this.bind(this.updateResults));
c.bind("focus",function(){c.addClass("select2-focused");" "===c.val()&&c.val("")});c.bind("blur",function(){c.removeClass("select2-focused")});this.dropdown.delegate(".select2-results","mouseup",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable:not(.select2-disabled)").length?(this.highlightUnderEvent(a),this.selectHighlighted(a)):this.focusSearch();k(a)}));this.dropdown.bind("click mouseup mousedown",function(a){a.stopPropagation()});e.isFunction(this.opts.initSelection)&&(this.initSelection(),
this.monitorSource());(a.element.is(":disabled")||a.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var a=this.opts.element.data("select2");a!==g&&(a.container.remove(),a.dropdown.remove(),a.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(a){var b;var c=a.element;"select"===c.get(0).tagName.toLowerCase()&&(this.select=b=a.element);b&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),function(){if(this in
a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=e.extend({},{populateResults:function(b,c,d){var h=this.opts.id,l=this;var f=function(b,c,D){var E;var r=0;for(E=b.length;r<E;r+=1){var n=b[r];var k=h(n)!==g;var q=n.children&&0<n.children.length;var m=e("<li></li>");m.addClass("select2-results-dept-"+D);m.addClass("select2-result");m.addClass(k?"select2-result-selectable":"select2-result-unselectable");q&&m.addClass("select2-result-with-children");
m.addClass(l.opts.formatResultCssClass(n));k=e("<div></div>");k.addClass("select2-result-label");var p=a.formatResult(n,k,d);p!==g&&k.html(l.opts.escapeMarkup(p));m.append(k);q&&(q=e("<ul></ul>"),q.addClass("select2-result-sub"),f(n.children,q,D+1),m.append(q));m.data("select2-data",n);c.append(m)}};f(c,b,0)}},e.fn.select2.defaults,a);if("function"!==typeof a.id){var d=a.id;a.id=function(a){return a[d]}}b?(a.query=this.bind(function(a){var b={results:[],more:!1},d=a.term;var h=function(b,c){if(b.is("option"))a.matcher(d,
b.text(),b)&&c.push({id:b.attr("value"),text:b.text(),element:b.get(),css:b.attr("class")});else if(b.is("optgroup")){var e={text:b.attr("label"),children:[],element:b.get(),css:b.attr("class")};b.children().each2(function(a,b){h(b,e.children)});0<e.children.length&&c.push(e)}};var f=c.children();if(this.getPlaceholder()!==g&&0<f.length){var n=f[0];""===e(n).text()&&(f=f.not(n))}f.each2(function(a,c){h(c,b.results)});a.callback(b)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css}):
"query"in a||("ajax"in a?((b=a.element.data("ajax-url"))&&0<b.length&&(a.ajax.url=b),a.query=C(a.ajax)):"data"in a?a.query=F(a.data):"tags"in a&&(a.query=G(a.tags),a.createSearchChoice=function(a){return{id:a,text:a}},a.initSelection=function(b,c){var d=[];e(u(b.val(),a.separator)).each(function(){var b=this,c=this,h=a.tags;e.isFunction(h)&&(h=h());e(h).each(function(){if(p(this.id,b))return c=this.text,!1});d.push({id:b,text:c})});c(d)}));if("function"!==typeof a.query)throw"query function not defined for Select2 "+
a.element.attr("id");return a},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(a){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||
(this.enabled=!0,this.container.removeClass("select2-container-disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.container.offset(),b=this.container.outerHeight(),c=this.container.outerWidth(),d=this.dropdown.outerHeight(),h=e(window).scrollTop()+document.documentElement.clientHeight;b=a.top+b;var l=a.left;
h=b+d<=h;var f=a.top-d>=this.body().scrollTop(),g=this.dropdown.hasClass("select2-drop-above");if("static"!==this.body().css("position")){var k=this.body().offset();b-=k.top;l-=k.left}g?(g=!0,!f&&h&&(g=!1)):(g=!1,!h&&f&&(g=!0));g?(b=a.top-d,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above"));a=e.extend({top:b,left:l,width:c},w(this.opts.dropdownCss));this.dropdown.css(a)},
shouldOpen:function(){if(this.opened())return!1;var a=e.Event("open");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;window.setTimeout(this.bind(this.opening),1);return!0},opening:function(){var a=this.containerId,b=this.containerSelector,c="scroll."+a,d="resize."+a;this.container.parents().each(function(){e(this).bind(c,
function(){var a=e(b);0==a.length&&e(this).unbind(c);a.select2("close")})});e(window).bind(d,function(){var a=e(b);0==a.length&&e(window).unbind(d);a.select2("close")});this.clearDropdownAlignmentPreference();" "===this.search.val()&&this.search.val("");this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.updateResults(!0);this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());this.dropdown.show();this.positionDropdown();
this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();this.focusSearch();y=(new Date).getTime()},close:function(){var a=(new Date).getTime();if(!(y>a-1E3)&&this.opened()){var b=this;this.container.parents().each(function(){e(this).unbind("scroll."+b.containerId)});e(window).unbind("resize."+this.containerId);this.clearDropdownAlignmentPreference();this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();
this.clearSearch();this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},ensureHighlightVisible:function(){var a=this.results;var b=this.highlight();if(!(0>b))if(0==b)a.scrollTop(0);else{var c=a.find(".select2-result-selectable");var d=e(c[b]);var h=d.offset().top+d.outerHeight();b===c.length-1&&(c=a.find("li.select2-more-results"),0<c.length&&(h=c.offset().top+c.outerHeight()));c=a.offset().top+a.outerHeight();h>c&&a.scrollTop(a.scrollTop()+(h-c));d=d.offset().top-a.offset().top;
0>d&&a.scrollTop(a.scrollTop()+d)}},moveHighlight:function(a){for(var b=this.results.find(".select2-result-selectable"),c=this.highlight();-1<c&&c<b.length;){c+=a;var d=e(b[c]);if(d.hasClass("select2-result-selectable")&&!d.hasClass("select2-disabled")){this.highlight(c);break}}},highlight:function(a){var b=this.results.find(".select2-result-selectable").not(".select2-disabled");if(0===arguments.length)return m(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);b.removeClass("select2-highlighted");
e(b[a]).addClass("select2-highlighted");this.ensureHighlightVisible()},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.results.find(".select2-result-selectable");this.highlight(b.index(a))}else 0==a.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var a=
this.results,b=a.find("li.select2-more-results"),c=this.resultsPage+1,d=this,e=this.search.val(),l=this.context;0!==b.length&&0>=b.offset().top-a.offset().top-a.height()&&(b.addClass("select2-active"),this.opts.query({term:e,page:c,context:l,matcher:this.opts.matcher,callback:this.bind(function(h){d.opened()&&(d.opts.populateResults.call(this,a,h.results,{term:e,page:c,context:l}),!0===h.more?(b.detach().appendTo(a).text(d.opts.formatLoadMore(c+1)),window.setTimeout(function(){d.loadMoreIfNeeded()},
10)):b.remove(),d.positionDropdown(),d.resultsPage=c)})}))},tokenize:function(){},updateResults:function(a){function b(){h.scrollTop(0);d.removeClass("select2-active");f.positionDropdown()}function c(a){h.html(f.opts.escapeMarkup(a));b()}var d=this.search,h=this.results,l=this.opts,f=this;if(!0===a||!1!==this.showSearchInput&&this.opened()){d.addClass("select2-active");if(1<=l.maximumSelectionSize){var k=this.data();if(e.isArray(k)&&k.length>=l.maximumSelectionSize&&v(l.formatSelectionTooBig,"formatSelectionTooBig")){c("<li class='select2-selection-limit'>"+
l.formatSelectionTooBig(l.maximumSelectionSize)+"</li>");return}}d.val().length<l.minimumInputLength&&v(l.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+l.formatInputTooShort(d.val(),l.minimumInputLength)+"</li>"):(c("<li class='select2-searching'>"+l.formatSearching()+"</li>"),k=this.tokenize(),k!=g&&null!=k&&d.val(k),this.resultsPage=1,l.query({term:d.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(k){if(this.opened()){this.context=
k.context===g?null:k.context;if(this.opts.createSearchChoice&&""!==d.val()){var n=this.opts.createSearchChoice.call(null,d.val(),k.results);n!==g&&null!==n&&f.id(n)!==g&&null!==f.id(n)&&0===e(k.results).filter(function(){return p(f.id(this),f.id(n))}).length&&k.results.unshift(n)}0===k.results.length&&v(l.formatNoMatches,"formatNoMatches")?c("<li class='select2-no-results'>"+l.formatNoMatches(d.val())+"</li>"):(h.empty(),f.opts.populateResults.call(this,h,k.results,{term:d.val(),page:this.resultsPage,
context:null}),!0===k.more&&v(l.formatLoadMore,"formatLoadMore")&&(h.append("<li class='select2-more-results'>"+f.opts.escapeMarkup(l.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){f.loadMoreIfNeeded()},10)),this.postprocessResults(k,a),b())}})}))}},cancel:function(){this.close()},blur:function(){this.close();this.container.removeClass("select2-container-active");this.dropdown.removeClass("select2-drop-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();
this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){this.search.show();this.search.focus();window.setTimeout(this.bind(function(){this.search.show();this.search.focus();this.search.val(this.search.val())}),10)},selectHighlighted:function(){var a=this.highlight(),b=this.results.find(".select2-highlighted").not(".select2-disabled"),c=b.closest(".select2-result-selectable").data("select2-data");c&&(b.addClass("select2-disabled"),this.highlight(a),
this.onSelect(c))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){var a=function(){var a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){var c=this.opts.element.attr("style");
if(c!==g){c=c.split(";");var d=0;for(a=c.length;d<a;d+=1){var h=c[d].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(null!==h&&1<=h.length)return h[1]}}return"resolve"===this.opts.width?(c=this.opts.element.css("width"),0<c.indexOf("%")?c:0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==a&&this.container.attr("style","width: "+a)}});
var I=x(z,{createContainer:function(){return e("<div></div>",{"class":"select2-container"}).html("    <a href='#' onclick='return false;' class='select2-choice'>   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>   <div><b></b></div></a>    <div class='select2-drop select2-offscreen'>   <div class='select2-search'>       <input type='text' autocomplete='off' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},opening:function(){this.search.show();
this.parent.opening.apply(this,arguments);this.dropdown.removeClass("select2-offscreen")},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show())},focus:function(){this.close();this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments);this.selection.focus()},initContainer:function(){var a,
b=this.dropdown;this.selection=a=this.container.find(".select2-choice");this.search.bind("keydown",this.bind(function(a){if(this.enabled)if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)k(a);else if(this.opened())switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);k(a);break;case f.TAB:case f.ENTER:this.selectHighlighted();k(a);break;case f.ESC:this.cancel(a),k(a)}else a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC||!1===this.opts.openOnEnter&&a.which===
f.ENTER||this.open()}));this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")}));this.search.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active");window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)}));a.bind("mousedown",this.bind(function(a){this.opened()?(this.close(),this.selection.focus()):this.enabled&&this.open()}));b.bind("mousedown",this.bind(function(){this.search.focus()}));
a.bind("focus",this.bind(function(){this.container.addClass("select2-container-active");this.search.attr("tabIndex","-1")}));a.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active");window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)}));a.bind("keydown",this.bind(function(a){if(this.enabled)if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)k(a);else if(!(a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||
a.which===f.ESC||!1===this.opts.openOnEnter&&a.which===f.ENTER))if(a.which==f.DELETE)this.opts.allowClear&&this.clear();else{this.open();if(a.which!==f.ENTER&&!(48>a.which)){var b=String.fromCharCode(a.which).toLowerCase();a.shiftKey&&(b=b.toUpperCase());this.search.focus();this.search.val(b)}k(a)}}));a.delegate("abbr","mousedown",this.bind(function(a){this.enabled&&(this.clear(),k(a),this.close(),this.triggerChange(),this.selection.focus())}));this.setPlaceholder();this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},
clear:function(){this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder()},initSelection:function(){if(""===this.opts.element.val())this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==g&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder())})}},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments);"select"===a.element.get(0).tagName.toLowerCase()&&
(a.initSelection=function(a,c){var b=a.find(":selected");e.isFunction(c)&&c({id:b.attr("value"),text:b.text()})});return a},setPlaceholder:function(){var a=this.getPlaceholder();""!==this.opts.element.val()||a===g||this.select&&""!==this.select.find("option:first").text()||(this.selection.find("span").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide())},postprocessResults:function(a,b){var c=0,d=this,h=!0;this.results.find(".select2-result-selectable").each2(function(a,
b){if(p(d.id(b.data("select2-data")),d.opts.element.val()))return c=a,!1});this.highlight(c);!0===b&&(h=this.showSearchInput=H(a.results)>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[h?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[h?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(a){var b=this.opts.element.val();this.opts.element.val(this.id(a));this.updateSelection(a);this.close();this.selection.focus();p(b,
this.id(a))||this.triggerChange()},updateSelection:function(a){var b=this.selection.find("span");this.selection.data("select2-data",a);b.empty();a=this.opts.formatSelection(a,b);a!==g&&b.append(this.opts.escapeMarkup(a));this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==g&&this.selection.find("abbr").show()},val:function(){var a=null,b=this;if(0===arguments.length)return this.opts.element.val();var c=arguments[0];if(this.select)this.select.val(c).find(":selected").each2(function(b,
c){a={id:c.attr("value"),text:c.text()};return!1}),this.updateSelection(a),this.setPlaceholder();else{if(this.opts.initSelection===g)throw Error("cannot call val() if initSelection() is not defined");c?(this.opts.element.val(c),this.opts.initSelection(this.opts.element,function(a){b.opts.element.val(a?b.id(a):"");b.updateSelection(a);b.setPlaceholder()})):this.clear()}},clearSearch:function(){this.search.val("")},data:function(a){if(0===arguments.length){var b=this.selection.data("select2-data");
b==g&&(b=null);return b}a&&""!==a?(this.opts.element.val(a?this.id(a):""),this.updateSelection(a)):this.clear()}});var J=x(z,{createContainer:function(){return e("<div></div>",{"class":"select2-container select2-container-multi"}).html("    <ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi' style='display:none;'>   <ul class='select2-results'>   </ul></div>")},prepareOpts:function(){var a=
this.parent.prepareOpts.apply(this,arguments);"select"===a.element.get(0).tagName.toLowerCase()&&(a.initSelection=function(a,c){var b=[];a.find(":selected").each2(function(a,c){b.push({id:c.attr("value"),text:c.text()})});e.isFunction(c)&&c(b)});return a},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");this.search.bind("keydown",this.bind(function(b){if(this.enabled){if(b.which===f.BACKSPACE&&
""===this.search.val()){this.close();var c=a.find(".select2-search-choice-focus");if(0<c.length){this.unselect(c.first());this.search.width(10);k(b);return}c=a.find(".select2-search-choice");0<c.length&&c.last().addClass("select2-search-choice-focus")}else a.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);k(b);return;case f.ENTER:case f.TAB:this.selectHighlighted();k(b);return;
case f.ESC:this.cancel(b);k(b);return}b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC||!1===this.opts.openOnEnter&&b.which===f.ENTER||(this.open(),b.which!==f.PAGE_UP&&b.which!==f.PAGE_DOWN||k(b))}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(a){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.clearSearch();a.stopImmediatePropagation()}));this.container.delegate(".select2-choices",
"mousedown",this.bind(function(a){!this.enabled||0<e(a.target).closest(".select2-search-choice").length||(this.clearPlaceholder(),this.open(),this.focusSearch(),a.preventDefault())}));this.container.delegate(".select2-choices","focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},
disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){""===this.opts.element.val()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==g&&null!==b&&(a.updateSelection(b),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder();a!==g&&0===this.getVal().length&&!1===
this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.resizeSearch()):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")},opening:function(){this.parent.opening.apply(this,arguments);this.clearPlaceholder();this.resizeSearch();this.focusSearch()},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},
focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>m(d.id(this),b)&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer(a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&
a!=g&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a){this.addSelectedChoice(a);this.select&&this.postprocessResults();this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),this.positionDropdown()):this.close();this.triggerChange({added:a});this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),
c=this.id(a),d=this.getVal();var h=this.opts.formatSelection(a,b);b.find("div").replaceWith("<div>"+this.opts.escapeMarkup(h)+"</div>");b.find(".select2-search-choice-close").bind("mousedown",k).bind("click dblclick",this.bind(function(a){this.enabled&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue(),
k(a))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));b.data("select2-data",a);b.insertBefore(this.searchContainer);d.push(c);this.setVal(d)},unselect:function(a){var b=this.getVal();a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";var c=a.data("select2-data");var d=m(this.id(c),b);0<=d&&(b.splice(d,1),this.setVal(b),this.select&&
this.postprocessResults());a.remove();this.triggerChange({removed:c})},postprocessResults:function(){var a=this.getVal(),b=this.results.find(".select2-result-selectable"),c=this.results.find(".select2-result-with-children"),d=this;b.each2(function(b,c){var e=d.id(c.data("select2-data"));0<=m(e,a)?c.addClass("select2-disabled").removeClass("select2-result-selectable"):c.removeClass("select2-disabled").addClass("select2-result-selectable")});c.each2(function(a,b){0==b.find(".select2-result-selectable").length?
b.addClass("select2-disabled"):b.removeClass("select2-disabled")});b.each2(function(a,b){if(!b.hasClass("select2-disabled")&&b.hasClass("select2-result-selectable"))return d.highlight(0),!1})},resizeSearch:function(){var a=this.search;a=a.outerWidth()-a.width();var b=this.search;if(!t){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);t=e("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,
fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"});e("body").append(t)}t.text(b.val());b=t.width()+10;var d=this.search.offset().left;c=this.selection.width();var f=this.selection.offset().left;d=c-(d-f)-a;d<b&&(d=c-a);40>d&&(d=c-a);this.search.width(d)},getVal:function(){if(this.select){var a=this.select.val();return null===a?[]:a}a=this.opts.element.val();return u(a,this.opts.separator)},setVal:function(a){if(this.select)this.select.val(a);
else{var b=[];e(a).each(function(){0>m(this,b)&&b.push(this)});this.opts.element.val(0===b.length?"":b.join(this.opts.separator))}},val:function(){var a,b=[],c=this;if(0===arguments.length)return this.getVal();if(a=arguments[0])if(this.setVal(a),this.select)this.select.find(":selected").each(function(){b.push({id:e(this).attr("value"),text:e(this).text()})}),this.updateSelection(b);else{if(this.opts.initSelection===g)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,
function(a){var b=e(a).map(c.id);c.setVal(b);c.updateSelection(a);c.clearSearch()})}else this.opts.element.val(""),this.updateSelection([]);this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();
this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a){var b=this;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();a||(a=[]);var c=e.map(a,function(a){return b.opts.id(a)});this.setVal(c);this.updateSelection(a);this.clearSearch()}});e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),
b,c,d,f,k="val destroy opened open close focus isFocused container onSortStart onSortEnd enable disable positionDropdown data".split(" ");this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?f=b.element.attr("multiple"):(f=b.multiple||!1,"tags"in b&&(b.multiple=f=!0)),c=f?new J:new I,c.init(b);else if("string"===typeof a[0]){if(0>m(a[0],k))throw"Unknown method: "+a[0];d=g;c=e(this).data("select2");
if(c!==g&&(d="container"===a[0]?c.container:c[a[0]].apply(c,a.slice(1)),d!==g))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return d===g?this:d};e.fn.select2.defaults={width:"copy",closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c){b=[];B(a.text,c.term,b);return b.join("")},formatSelection:function(a,b){return a?a.text:g},formatResultCssClass:function(a){return g},formatNoMatches:function(){return"No matches found"},
formatInputTooShort:function(a,b){return"Please enter "+(b-a.length)+" more characters"},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(a){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=b.toUpperCase().indexOf(a.toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(a,
b,c,d){var e=a,f;if(!d.createSearchChoice||!d.tokenSeparators||1>d.tokenSeparators.length)return g;for(;;){var k=-1;var m=0;for(f=d.tokenSeparators.length;m<f;m++){var r=d.tokenSeparators[m];k=a.indexOf(r);if(0<=k)break}if(0>k)break;var n=a.substring(0,k);a=a.substring(k+r.length);if(0<n.length&&(n=d.createSearchChoice(n,b),n!==g&&null!==n&&d.id(n)!==g&&null!==d.id(n))){k=!1;m=0;for(f=b.length;m<f;m++)if(p(d.id(n),d.id(b[m]))){k=!0;break}k||c(n)}}if(0!=e.localeCompare(a))return a},escapeMarkup:function(a){return a&&
"string"===typeof a?a.replace(/&/g,"&amp;"):a},blurOnChange:!1};window.Select2={query:{ajax:C,local:F,tags:G},util:{debounce:A,markMatch:B},"class":{"abstract":z,single:I,multi:J}}}})(jQuery);
